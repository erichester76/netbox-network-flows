{% extends 'generic/object.html' %}
{% load render_table from django_tables2 %}

{% block content %}
<div class="row">
  <div class="col-md-12">
    <div class="card">
      <div class="card-header">
        <h5>Traffic Flows</h5>
      </div>
      <div class="card-body">
        {% if flows_table %}
          {% render_table flows_table %}
          <h6>Mermaid Flow Diagram</h6>
          <div class="mermaid">
            {{ mermaid_code|safe }}
          </div>
        {% else %}
          <p>No traffic flows found for this device.</p>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block javascript %}
<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
<script>
  mermaid.initialize({ startOnLoad: true });
</script>
{% endblock %}